local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:FindFirstChild("PlayerGui")
if not playerGui then
    repeat wait() playerGui = player:FindFirstChild("PlayerGui") until playerGui
end

local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 300, 0, 200)
frame.Position = UDim2.new(0.5, -150, 0.5, -100)
frame.BackgroundColor3 = Color3.new(0.15, 0.15, 0.15)
frame.BorderSizePixel = 2
frame.BorderColor3 = Color3.new(1, 1, 1)
frame.Active = true
frame.Draggable = true

local titleLabel = Instance.new("TextLabel", frame)
titleLabel.Size = UDim2.new(1, 0, 0.2, 0)
titleLabel.Text = "التحكم في التغبيش"
titleLabel.TextScaled = true
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.new(1, 1, 1)

local blurBox = Instance.new("TextBox", frame)
blurBox.Size = UDim2.new(0.4, 0, 0.2, 0)
blurBox.Position = UDim2.new(0.1, 0, 0.3, 0)
blurBox.PlaceholderText = "شدة التغبيش (0-50)"
blurBox.Text = ""
blurBox.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
blurBox.TextColor3 = Color3.new(1, 1, 1)
blurBox.TextScaled = true

local applyButton = Instance.new("TextButton", frame)
applyButton.Size = UDim2.new(0.4, 0, 0.2, 0)
applyButton.Position = UDim2.new(0.1, 0, 0.55, 0)
applyButton.Text = "تطبيق التغبيش"
applyButton.TextScaled = true
applyButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
applyButton.TextColor3 = Color3.new(1, 1, 1)

local resetButton = Instance.new("TextButton", frame)
resetButton.Size = UDim2.new(0.4, 0, 0.2, 0)
resetButton.Position = UDim2.new(0.55, 0, 0.55, 0)
resetButton.Text = "إعادة التعيين"
resetButton.TextScaled = true
resetButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
resetButton.TextColor3 = Color3.new(1, 1, 1)

-- إنشاء تأثير التغبيش
local blurEffect = Instance.new("BlurEffect", game.Lighting)
blurEffect.Size = 0 -- البدء بحجم 0 (بدون تغبيش)

local function applyBlur(intensity)
    if typeof(intensity) == "number" and intensity >= 0 and intensity <= 50 then
        blurEffect.Size = intensity
        print("تم تطبيق التغبيش بقوة: " .. intensity)
    else
        warn("شدة التغبيش يجب أن تكون بين 0 و 50!")
    end
end

local function resetBlur()
    blurEffect.Size = 0
    print("تم إعادة التغبيش إلى الوضع الافتراضي (بدون تغبيش)")
end

applyButton.MouseButton1Click:Connect(function()
    local intensity = tonumber(blurBox.Text)
    if intensity then
        applyBlur(intensity)
    else
        warn("الرجاء إدخال رقم بين 0 و 50!")
    end
end)

resetButton.MouseButton1Click:Connect(function()
    resetBlur()
end)

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:FindFirstChild("PlayerGui")
if not playerGui then
    repeat wait() playerGui = player:FindFirstChild("PlayerGui") until playerGui
end

local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false 
screenGui.Parent = playerGui

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 200, 0, 50)
frame.Position = UDim2.new(0.4, 0, 0.1, 0)
frame.BackgroundColor3 = Color3.new(0.15, 0.15, 0.15)
frame.BorderSizePixel = 2
frame.BorderColor3 = Color3.new(1, 1, 1)
frame.Active = true
frame.Draggable = true 

local titleLabel = Instance.new("TextLabel", frame)
titleLabel.Size = UDim2.new(1, 0, 0.5, 0)
titleLabel.Text = "Optimize Game"
titleLabel.TextScaled = true
titleLabel.BackgroundTransparency = 1
titleLabel.TextColor3 = Color3.new(1, 1, 1)

toggleButton = Instance.new("TextButton", frame)
toggleButton.Size = UDim2.new(1, 0, 0.5, 0)
toggleButton.Position = UDim2.new(0, 0, 0.5, 0)
toggleButton.Text = "تشغيل"
toggleButton.TextScaled = true
toggleButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
toggleButton.TextColor3 = Color3.new(1, 1, 1)

local optimizationEnabled = false
local originalSettings = {}

local function saveOriginalSettings()
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("BasePart") then
            originalSettings[obj] = {
                Material = obj.Material,
                Color = obj.Color
            }
        elseif obj:IsA("ParticleEmitter") or obj:IsA("Beam") or obj:IsA("Trail") then
            originalSettings[obj] = {
                Enabled = obj.Enabled
            }
        end
    end
    originalSettings.Lighting = {
        GlobalShadows = game.Lighting.GlobalShadows,
        FogEnd = game.Lighting.FogEnd,
        Brightness = game.Lighting.Brightness,
        Ambient = game.Lighting.Ambient
    }
end

local function optimizeGame()
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("Texture") or obj:IsA("Decal") then
            obj:Destroy()
        elseif obj:IsA("BasePart") then
            obj.Material = Enum.Material.SmoothPlastic
            obj.Color = Color3.fromRGB(50, 50, 50) -- لون رمادي داكن (قريب من السواد)
        end
    end
    game.Lighting.GlobalShadows = false
    game.Lighting.FogEnd = 50
    game.Lighting.Brightness = 1
    game.Lighting.Ambient = Color3.fromRGB(50, 50, 50) -- لون إضاءة رمادي داكن
    for _, obj in pairs(game:GetDescendants()) do
        if obj:IsA("ParticleEmitter") or obj:IsA("Beam") or obj:IsA("Trail") then
            obj.Enabled = false
        end
    end
    print("Fast Mode Enabled")
end

local function restoreOriginalSettings()
    for obj, settings in pairs(originalSettings) do
        if obj:IsA("BasePart") then
            obj.Material = settings.Material
            obj.Color = settings.Color
        elseif obj:IsA("ParticleEmitter") or obj:IsA("Beam") or obj:IsA("Trail") then
            obj.Enabled = settings.Enabled
        end
    end
    game.Lighting.GlobalShadows = originalSettings.Lighting.GlobalShadows
    game.Lighting.FogEnd = originalSettings.Lighting.FogEnd
    game.Lighting.Brightness = originalSettings.Lighting.Brightness
    game.Lighting.Ambient = originalSettings.Lighting.Ambient
    print("Fast Mode Disabled")
end

toggleButton.MouseButton1Click:Connect(function()
    optimizationEnabled = not optimizationEnabled
    toggleButton.Text = optimizationEnabled and "إيقاف" or "تشغيل"
    if optimizationEnabled then
        saveOriginalSettings()
        optimizeGame()
    else
        restoreOriginalSettings()
    end
end)
